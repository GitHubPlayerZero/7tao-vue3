var _=Object.defineProperty;var x=(t,e,n)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var u=(t,e,n)=>x(t,typeof e!="symbol"?e+"":e,n);import{T as f,r as M,c as y,_ as C,E as I,a as l,b as r,d as m,F as P,e as T,n as p,w,u as S,f as d,g as z,o as g,t as b,h as D}from"./index-C84kNxfd.js";const N=10,V=1;class B{constructor(e,n=N,i=V){u(this,"datas");u(this,"pageSize");u(this,"currentPage");this.datas=e,this.pageSize=n,this.currentPage=i}}function L(t){const e=t.datas;if(!(e instanceof Array))throw Error("[datas] 必須使用陣列！");let n;try{n=f.converToNumber(t.pageSize)}catch(o){throw new Error("[pageSize] 不正確！",{cause:o})}let i;try{i=M(f.converToNumber(t.currentPage))}catch(o){throw new Error("[currentPage] 不正確！",{cause:o})}const a=e.length;let c=Math.ceil(a/n);const h=y(()=>{const o=(i.value-1)*n,E=i.value*n;return e.slice(o,E)});function s(o){if(o=f.converToNumber(o),o<1||o>c)throw Error(`[pageNo] 頁碼應介於 1 ~ ${c} 之間！`);i.value=o}function v(){const o=i.value+1;o<=c&&(i.value=o)}function k(){const o=i.value-1;o>=1&&(i.value=o)}return{currentDatas:h,currentPage:i,totalPages:c,totalSize:a,pageSize:n,changePage:s,goToNextPage:v,goToPrevPage:k}}const F=12,A={data(){return{selectedTagIds:d.getTagData(),tagModel:null,eventTagModel:null,pagination:null}},methods:{toggleTag(t){const e=this.selectedTagIds.indexOf(t);e>=0?this.selectedTagIds.splice(e,1):this.selectedTagIds.push(t),d.updateTagData(this.selectedTagIds),d.updatePageData(1)}},computed:{filteredEvents(){var t,e,n,i,a,c;return((e=(t=this.eventTagModel)==null?void 0:t.datas)==null?void 0:e.length)>0?((n=this.selectedTagIds)==null?void 0:n.length)>0&&((i=this.selectedTagIds)==null?void 0:i.length)<((c=(a=this.tagModel)==null?void 0:a.datas)==null?void 0:c.length)?this.eventTagModel.filterByTagIds(this.selectedTagIds):this.eventTagModel.datas:[]}},watch:{filteredEvents(t){const e=d.getPageData(),n=new B(t,F,e);this.pagination=L(n)},"pagination.currentPage"(t){d.updatePageData(t)},"pagination.currentDatas"(){window.scrollTo({top:0})}},components:{EventCard:I},created(){S().then(t=>{this.tagModel=t.tagModel,this.eventTagModel=t.eventTagModel})}},H={class:"container mt-4 mt-md-8"},O={key:0,class:"d-flex flex-wrap gap-2 mb-8"},U=["onClick"],j={key:1,class:"row row-gap-6 row-gap-md-12 mb-8 mb-md-15"},q={"aria-label":"Page navigation",class:"mb-12 mb-md-15"},G={key:0,class:"pagination"},J=["onClick"];function K(t,e,n,i,a,c){const h=z("EventCard");return g(),l("div",H,[e[4]||(e[4]=r("h2",{class:"title mb-3 mb-md-8"},[r("span",{class:"title-english"},"EVENT"),r("span",{class:"title-chinese"},"所有活動")],-1)),a.tagModel?(g(),l("ul",O,[(g(!0),l(P,null,T(a.tagModel.datas,s=>(g(),l("li",{key:s.id},[r("button",{type:"button",class:p(a.selectedTagIds.includes(s.id)?"tag-btn-selected":"tag-btn"),onClick:v=>c.toggleTag(s.id)},b(s.name),11,U)]))),128))])):m("",!0),a.pagination?(g(),l("ul",j,[(g(!0),l(P,null,T(a.pagination.currentDatas,s=>(g(),l("li",{class:"col-md-6 col-xl-4",key:s.id},[D(h,{event:s},null,8,["event"])]))),128))])):m("",!0),r("nav",q,[a.pagination?(g(),l("ul",G,[r("li",{class:p(["page-item",{disabled:a.pagination.currentPage===1}])},[r("a",{class:"page-link fs-18",href:"#",onClick:e[0]||(e[0]=w((...s)=>a.pagination.goToPrevPage&&a.pagination.goToPrevPage(...s),["prevent"]))},e[2]||(e[2]=[r("i",{class:"icofont-arrow-left"},null,-1)]))],2),(g(!0),l(P,null,T(a.pagination.totalPages,s=>(g(),l("li",{key:s,class:p(["page-item",{active:a.pagination.currentPage===s}])},[r("a",{class:"page-link",href:"#",onClick:w(v=>a.pagination.changePage(s),["prevent"])},b(s),9,J)],2))),128)),r("li",{class:p(["page-item",{disabled:a.pagination.currentPage===a.pagination.totalPages}])},[r("a",{class:"page-link fs-18",href:"#",onClick:e[1]||(e[1]=w((...s)=>a.pagination.goToNextPage&&a.pagination.goToNextPage(...s),["prevent"]))},e[3]||(e[3]=[r("i",{class:"icofont-arrow-right"},null,-1)]))],2)])):m("",!0)])])}const W=C(A,[["render",K]]);export{W as default};
//# sourceMappingURL=EventListView-CRCNNXwh.js.map
