var _=Object.defineProperty;var x=(t,e,n)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var u=(t,e,n)=>x(t,typeof e!="symbol"?e+"":e,n);import{T as f,r as y,c as C,_ as I,E as S,a as r,b as l,d as m,F as T,e as P,n as p,w,f as z,u as D,g as d,h as N,o as g,t as b,i as V}from"./index-QmxKL_5Z.js";const B=10,L=1;class F{constructor(e,n=B,i=L){u(this,"datas");u(this,"pageSize");u(this,"currentPage");this.datas=e,this.pageSize=n,this.currentPage=i}}function H(t){const e=t.datas;if(!(e instanceof Array))throw Error("[datas] 必須使用陣列！");let n;try{n=f.converToNumber(t.pageSize)}catch(o){throw new Error("[pageSize] 不正確！",{cause:o})}let i;try{i=y(f.converToNumber(t.currentPage))}catch(o){throw new Error("[currentPage] 不正確！",{cause:o})}const a=e.length;let c=Math.ceil(a/n);const h=C(()=>{const o=(i.value-1)*n,M=i.value*n;return e.slice(o,M)});function s(o){if(o=f.converToNumber(o),o<1||o>c)throw Error(`[pageNo] 頁碼應介於 1 ~ ${c} 之間！`);i.value=o}function v(){const o=i.value+1;o<=c&&(i.value=o)}function E(){const o=i.value-1;o>=1&&(i.value=o)}return{currentDatas:h,currentPage:i,totalPages:c,totalSize:a,pageSize:n,changePage:s,goToNextPage:v,goToPrevPage:E}}const A=12,k=new z,O={data(){return{selectedTagIds:d.getTagData(),tagModel:null,eventTagModel:null,pagination:null}},methods:{toggleTag(t){const e=this.selectedTagIds.indexOf(t);e>=0?this.selectedTagIds.splice(e,1):this.selectedTagIds.push(t),d.updateTagData(this.selectedTagIds),d.updatePageData(1)}},computed:{filteredEvents(){var t,e,n,i,a,c;return((e=(t=this.eventTagModel)==null?void 0:t.datas)==null?void 0:e.length)>0?((n=this.selectedTagIds)==null?void 0:n.length)>0&&((i=this.selectedTagIds)==null?void 0:i.length)<((c=(a=this.tagModel)==null?void 0:a.datas)==null?void 0:c.length)?this.eventTagModel.filterByTagIds(this.selectedTagIds):this.eventTagModel.datas:[]}},watch:{filteredEvents(t){const e=d.getPageData(),n=new F(t,A,e);this.pagination=H(n)},"pagination.currentPage"(t){d.updatePageData(t)},"pagination.currentDatas"(){window.scrollTo({top:0})}},components:{EventCard:S},created(){k.open(),D().then(t=>{this.tagModel=t.tagModel,this.eventTagModel=t.eventTagModel,console.log("this.eventTagModel =====>",this.eventTagModel)}).finally(()=>{k.close()})}},U={class:"container mt-4 mt-md-8"},j={key:0,class:"d-flex flex-wrap gap-2 mb-8"},q=["onClick"],G={key:1,class:"row row-gap-6 row-gap-md-12 mb-8 mb-md-15"},J={"aria-label":"Page navigation",class:"mb-12 mb-md-15"},K={key:0,class:"pagination"},Q=["onClick"];function R(t,e,n,i,a,c){const h=N("EventCard");return g(),r("div",U,[e[4]||(e[4]=l("h2",{class:"title mb-3 mb-md-8"},[l("span",{class:"title-english"},"EVENT"),l("span",{class:"title-chinese"},"所有活動")],-1)),a.tagModel?(g(),r("ul",j,[(g(!0),r(T,null,P(a.tagModel.datas,s=>(g(),r("li",{key:s.id},[l("button",{type:"button",class:p(a.selectedTagIds.includes(s.id)?"tag-btn-selected":"tag-btn"),onClick:v=>c.toggleTag(s.id)},b(s.name),11,q)]))),128))])):m("",!0),a.pagination?(g(),r("ul",G,[(g(!0),r(T,null,P(a.pagination.currentDatas,s=>(g(),r("li",{class:"col-md-6 col-xl-4",key:s.id},[V(h,{event:s},null,8,["event"])]))),128))])):m("",!0),l("nav",J,[a.pagination?(g(),r("ul",K,[l("li",{class:p(["page-item",{disabled:a.pagination.currentPage===1}])},[l("a",{class:"page-link fs-18",href:"#",onClick:e[0]||(e[0]=w((...s)=>a.pagination.goToPrevPage&&a.pagination.goToPrevPage(...s),["prevent"]))},e[2]||(e[2]=[l("i",{class:"icofont-arrow-left"},null,-1)]))],2),(g(!0),r(T,null,P(a.pagination.totalPages,s=>(g(),r("li",{key:s,class:p(["page-item",{active:a.pagination.currentPage===s}])},[l("a",{class:"page-link",href:"#",onClick:w(v=>a.pagination.changePage(s),["prevent"])},b(s),9,Q)],2))),128)),l("li",{class:p(["page-item",{disabled:a.pagination.currentPage===a.pagination.totalPages}])},[l("a",{class:"page-link fs-18",href:"#",onClick:e[1]||(e[1]=w((...s)=>a.pagination.goToNextPage&&a.pagination.goToNextPage(...s),["prevent"]))},e[3]||(e[3]=[l("i",{class:"icofont-arrow-right"},null,-1)]))],2)])):m("",!0)])])}const Y=I(O,[["render",R]]);export{Y as default};
//# sourceMappingURL=EventListView-dD3tqBy_.js.map
