{"version":3,"file":"EventDetailView-CbhRJdwZ.js","sources":["../../src/services/commonService.js","../../src/components/eventDetail/TicketInfo.vue","../../src/views/EventDetailView.vue"],"sourcesContent":["/**\r\n * 其它通用處理\r\n */\r\nexport class CommonService {\r\n  /**\r\n   * 換行符號。\r\n   */\r\n  static get lineBreakSymbol() {\r\n    return \"\\n\";\r\n  }\r\n\r\n  /**\r\n   * 將文章依據換行符號切割成段落。\r\n   * @param {string} article 文章。\r\n   * @returns {string[]} 切割好的各段落，若無法切割則回傳空陣列。\r\n   */\r\n  static splitParagraphs(article) {\r\n    return article?.split(this.lineBreakSymbol) ?? [];\r\n  }\r\n}\r\n","<template>\r\n  <!-- {{ event }} -->\r\n  <article>\r\n    <!-- 標題 -->\r\n    <h2 class=\"title mb-2 mb-md-0\">\r\n      <span class=\"title-english\">TICKET</span>\r\n      <span class=\"title-chinese\">購票資訊</span>\r\n    </h2>\r\n\r\n    <!-- 票種表格 -->\r\n    <table class=\"table table-hover\">\r\n      <thead>\r\n        <tr>\r\n          <th scope=\"col\" class=\"th-date\">活動日期</th>\r\n          <th scope=\"col\">票種</th>\r\n          <th scope=\"col\" class=\"th-price\">票價</th>\r\n          <th scope=\"col\" class=\"th-purchase\">購票</th>\r\n        </tr>\r\n      </thead>\r\n      <tbody>\r\n        <tr v-for=\"ticket in tickets\" :key=\"ticket.id\">\r\n          <td>{{ event.date }}</td>\r\n          <td class=\"td-type\">{{ ticket.type }}</td>\r\n          <td>{{ ticket.price }}</td>\r\n          <td class=\"td-purchase\">\r\n            <button\r\n              type=\"button\"\r\n              class=\"px-3 px-md-6 py-2 btn btn-outline-primary font-noto-serif-tc\"\r\n              @click.prevent\r\n            >\r\n              <span class=\"d-none d-md-inline\">立即</span>購票\r\n            </button>\r\n          </td>\r\n        </tr>\r\n      </tbody>\r\n    </table>\r\n  </article>\r\n</template>\r\n\r\n<script>\r\nimport { EventTagRecord } from \"@/services/data/event\";\r\n\r\nexport default {\r\n  props: {\r\n    event: EventTagRecord,\r\n  },\r\n\r\n  data() {\r\n    console.log(`[TicketInfo data] event ======>`, this.event);\r\n\r\n    return {\r\n      // TODO 暫時寫死測試，之後要改成依據 event id 撈相關票券資訊\r\n      tickets: [\r\n        { id: 1, type: \"普通票\", price: \"$600\" },\r\n        { id: 2, type: \"改頭換面票（含大改造）\", price: \"$3600\" },\r\n        { id: 3, type: \"必勝票（含戀愛小抄）\", price: \"$8000\" },\r\n      ],\r\n    };\r\n  },\r\n  methods: {},\r\n  computed: {},\r\n  watch: {},\r\n  components: {},\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@use \"@/assets/scss/mixins/rwd\";\r\n\r\n// 票券表格\r\n.table {\r\n  // 所有標題欄位\r\n  th {\r\n    // Pad 以上裝置\r\n    @include rwd.pad-up {\r\n      // 加大上下留白\r\n      padding-top: 16px;\r\n      padding-bottom: 16px;\r\n    }\r\n  }\r\n\r\n  // 所有內容欄位\r\n  td {\r\n    // 手機版\r\n    @include rwd.pad-down {\r\n      font-size: 14px; // 使用較小字體\r\n    }\r\n  }\r\n\r\n  // 標題 - 活動日期\r\n  .th-date {\r\n    @include rwd.pad-up {\r\n      width: 20%;\r\n    }\r\n    @include rwd.desktop-up {\r\n      width: 30%;\r\n    }\r\n  }\r\n\r\n  // 標題 - 票價、購票\r\n  .th-price,\r\n  .th-purchase {\r\n    // 手機版\r\n    @include rwd.pad-down {\r\n      text-align: center; // 標題置中\r\n    }\r\n  }\r\n\r\n  // 標題 - 票價\r\n  .th-price {\r\n    // Pad 以上裝置\r\n    @include rwd.pad-up {\r\n      padding-left: 12px; // 增加左邊留白\r\n      width: 19%;\r\n    }\r\n\r\n    // 桌機以上裝置\r\n    @include rwd.desktop-up {\r\n      width: 25%;\r\n    }\r\n  }\r\n\r\n  // 標題 - 購票\r\n  .th-purchase {\r\n    @include rwd.pad-up {\r\n      width: 21.5%;\r\n    }\r\n    @include rwd.desktop-up {\r\n      width: 11.7%;\r\n    }\r\n  }\r\n\r\n  // 內容 - 票價\r\n  .td-type {\r\n    // 手機版\r\n    @include rwd.pad-down {\r\n      padding-right: 0; // 移除右邊留白以增加字數容量\r\n    }\r\n  }\r\n\r\n  // 內容 - 購票\r\n  .td-purchase {\r\n    white-space: nowrap; // 不斷行\r\n    text-align: right; // 靠右\r\n\r\n    // Pad 以上裝置\r\n    @include rwd.pad-up {\r\n      // 右邊留白\r\n      padding-left: 0;\r\n      padding-right: 16px;\r\n    }\r\n  }\r\n}\r\n</style>\r\n","<template>\r\n  <div class=\"container mt-4 mt-md-30px mb-12 mb-md-15\" v-if=\"event.id\">\r\n    <!-- Banner -->\r\n    <section class=\"row row-gap-2 mb-6\">\r\n      <!-- 圖片 -->\r\n      <div class=\"col-xl-10\">\r\n        <div class=\"p-3 p-xl-6 border border-2 border-md-3 border-primary\">\r\n          <img\r\n            :src=\"event.img\"\r\n            :alt=\"event.title\"\r\n            class=\"ratio-1d817 ratio-xl-1d869 w-100 object-fit-cover\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <!-- 日期時間 -->\r\n      <div class=\"col-xl-2\">\r\n        <h2 class=\"row row-gap-6 flex-xl-column lh-1 h-100\">\r\n          <!-- 年 -->\r\n          <div class=\"col-4 col-md-5 col-xl-12\">\r\n            <div\r\n              class=\"fs-24 fs-md-48 border border-2 border-md-3 border-primary h-78px h-md-119px text-center align-content-center\"\r\n            >\r\n              {{ day.year }}\r\n            </div>\r\n          </div>\r\n\r\n          <!-- 月日、時間 -->\r\n          <div class=\"col-8 col-md-7 col-xl-12 flex-grow-1 fs-16\">\r\n            <div\r\n              class=\"px-6 px-md-15 px-xl-0 py-xl-12 border border-2 border-md-3 border-primary d-flex flex-xl-column justify-content-between align-items-center text-center h-100\"\r\n            >\r\n              <!-- 月日 -->\r\n              <div class=\"fs-22 fs-md-32 fs-xl-48 lh-1d136 lh-md-1d146\">\r\n                {{ day.month }}<br />{{ day.date }}\r\n              </div>\r\n              <div class=\"slash\"></div>\r\n              <!-- 時間 -->\r\n              <div class=\"fs-md-24 fs-xl-32 lh-1d125 lh-md-1d155\">\r\n                {{ event.sTime }}<br />｜<br />{{ event.eTime }}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </h2>\r\n      </div>\r\n    </section>\r\n    <!-- Banner end -->\r\n\r\n    <!-- 內容說明 -->\r\n    <article>\r\n      <!-- 標題 -->\r\n      <h2 class=\"mb-2 mb-md-4 fs-32 fs-md-60 lh-1d438 lh-md-1d433 fw-bold letter-spacing-5\">\r\n        {{ event.title }}\r\n      </h2>\r\n      <p class=\"mb-6 fs-md-22 lh-md-1d45 font-noto-sans-tc\">\r\n        {{ event.subTitle }}\r\n      </p>\r\n\r\n      <!-- 標籤 -->\r\n      <ul class=\"mb-12 d-none d-md-flex flex-wrap gap-2\">\r\n        <li class=\"tag\" v-for=\"tag in event.tagDatas\" :key=\"tag.id\">{{ tag.name }}</li>\r\n      </ul>\r\n\r\n      <!-- 說明 -->\r\n      <div\r\n        class=\"p-4 p-md-8 mb-6 mb-md-12 border border-2 border-md-3 border-primary font-noto-sans-tc d-flex flex-column row-gap-4 text-justify\"\r\n      >\r\n        <p v-if=\"event.opening\">{{ event.opening }}</p>\r\n        <p v-for=\"(p, index) in getDescParagraphs(event.desc)\" :key=\"index\">{{ p }}</p>\r\n      </div>\r\n    </article>\r\n    <!-- 內容說明 end -->\r\n\r\n    <!-- 票券資訊 -->\r\n    <TicketInfo v-if=\"event.id\" :event=\"event\" />\r\n  </div>\r\n\r\n  <!-- 沒有活動資料 -->\r\n  <SimpleMsg :message=\"message\" v-else />\r\n</template>\r\n\r\n<script>\r\nimport { DateUtils, FullLoadingHelper } from \"@/helpers\";\r\nimport { CommonService } from \"@/services\";\r\nimport { EventService, EventTagRecord } from \"@/services/data/event\";\r\nimport { TagModel, TagService } from \"@/services/data/tag\";\r\nimport TicketInfo from \"@/components/eventDetail/TicketInfo.vue\";\r\nimport SimpleMsg from \"@/components/global/SimpleMsg.vue\";\r\n\r\n// loading 工具\r\nconst loading = new FullLoadingHelper();\r\n\r\nexport default {\r\n  /**\r\n   * @returns {{event: EventTagRecord}}\r\n   */\r\n  data() {\r\n    return {\r\n      event: {}, // 活動資料\r\n      message: \"\",\r\n    };\r\n  },\r\n\r\n  methods: {\r\n    /**\r\n     * 取得活動說明段落。\r\n     * @param {string} desc 完整活動說明。\r\n     * @returns {string[]} 依據換行符號切開的各個段落。\r\n     */\r\n    getDescParagraphs(desc) {\r\n      return CommonService.splitParagraphs(desc);\r\n    },\r\n  },\r\n\r\n  computed: {\r\n    /**\r\n     * 日期。\r\n     * @returns {{year: number, month: string, date: number}} 整理過的日期。\r\n     */\r\n    day() {\r\n      if (!this.event.date) {\r\n        return {};\r\n      }\r\n\r\n      const day = DateUtils.convertToDate(this.event.date);\r\n\r\n      return {\r\n        year: day.getFullYear(),\r\n        month: DateUtils.getMonthAbbrByMonth(day.getMonth() + 1),\r\n        date: day.getDate(),\r\n      };\r\n    },\r\n  },\r\n  // computed end\r\n\r\n  components: {\r\n    TicketInfo,\r\n    SimpleMsg,\r\n  },\r\n\r\n  beforeCreate() {\r\n    loading.open();\r\n\r\n    // 取得活動資訊\r\n    Promise.all([TagService.fetchTags(), EventService.fetchEvent(this.$route.params.id)])\r\n      .then((resList) => {\r\n        const tagModel = new TagModel(resList[0]);\r\n        this.event = new EventTagRecord(resList[1], tagModel);\r\n\r\n        if (!this.event.id) {\r\n          this.message = \"查無活動資料！\";\r\n        }\r\n      })\r\n      .finally(() => {\r\n        loading.close();\r\n      });\r\n  },\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@use \"@/assets/scss/mixins/rwd\";\r\n@use \"@/assets/scss/mixins/shape\";\r\n\r\n// 斜線\r\n.slash {\r\n  @include shape.slash(50px, 2px, 120);\r\n  @include rwd.pad-up {\r\n    width: 70px;\r\n  }\r\n  @include rwd.desktop-up {\r\n    width: 100px;\r\n  }\r\n}\r\n</style>\r\n"],"names":["CommonService","article","_sfc_main","EventTagRecord","_hoisted_1","_hoisted_2","_hoisted_3","_createElementBlock","_createElementVNode","_openBlock","_Fragment","_renderList","$data","ticket","_toDisplayString","$props","_cache","_withModifiers","_createTextVNode","loading","FullLoadingHelper","desc","day","DateUtils","TicketInfo","SimpleMsg","TagService","EventService","resList","tagModel","TagModel","_hoisted_4","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","$options","tag","_hoisted_18","_createCommentVNode","p","index","_createBlock","_component_TicketInfo","_component_SimpleMsg"],"mappings":"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"}