var q=Object.defineProperty;var T=s=>{throw TypeError(s)};var V=(s,e,o)=>e in s?q(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o;var p=(s,e,o)=>V(s,typeof e!="symbol"?e+"":e,o),j=(s,e,o)=>e.has(s)||T("Cannot "+o);var v=(s,e,o)=>(j(s,e,"read from private field"),o?o.call(s):e.get(s)),g=(s,e,o)=>e.has(s)?T("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,o);import{m as I}from"./pinia-OQ_CXEtD.js";import{A as N,R,M as F,_ as L,c as C,C as K,b as A,d as W,e as J,f as O,D as w}from"./index-BsxBAF9x.js";import"./sweetalert2-BQIkj5Wb.js";import{I as i,K as t,O as b,R as x,J as l,T as r,L as Q,W as m,P as M,V as D,Q as E}from"./@vue-BoO0vas5.js";import{_ as U}from"./SimpleMsg-H2ERzNbY.js";import"./vue-router-DbEUm0xe.js";import"./vue-loading-overlay-BeUYO37k.js";import"./vue-CRovxOtr.js";import"./axios-Dq7h7Pqt.js";import"./swiper-DifugWLp.js";import"./bootstrap-B6X7VvZS.js";import"./@popperjs-BEKk9TLb.js";import"./vee-validate-B3OKONGr.js";import"./@vee-validate-CU2VKbMu.js";var u;class B{static splitParagraphs(e){return(e==null?void 0:e.split(v(this,u)))??[]}}u=new WeakMap,g(B,u,`
`);class S extends N{static get url(){return"/tickets"}static fetchTickets(){return this._axios.get(`${this.url}`)}static fetchEventTickets(e){return this._axios.get(`${this.url}?eventId=${e}`)}}class Y{static async fetchTickets(){let e;return await S.fetchTickets().then(o=>{e=o.data}).catch(o=>{console.error(o)}),e||[]}static async fetchEventTickets(e){let o;return await S.fetchEventTickets(e).then(c=>{o=c.data}).catch(c=>{console.error(c)}),o||[]}}var f;const _=class _ extends R{constructor(o){super(o);p(this,"eventId");p(this,"type");p(this,"price",0);p(this,"qtyTotal",0);p(this,"qtyStock",0);this._assignData(o,v(_,f))}};f=new WeakMap,g(_,f,["eventId","type","price","qtyTotal","qtyStock"]);let y=_;class $ extends F{get datas(){return this._datas}constructor(e=[]){super(),e.forEach(o=>{const c=new y(o);this._datas.push(c)})}}const z={props:{event:{type:C,required:!0}},data(){return{tickets:[]}},created(){this.openLoading(),Y.fetchEventTickets(this.event.id).then(s=>{this.tickets=new $(s).datas}).finally(()=>{this.closeLoading()})},methods:{...I(A,{openLoading:"open",closeLoading:"close"}),purchase(s){K.alertWarningDetail("施工中...","購票功能尚未開放，敬請期待！")}}},G={class:"table table-hover"},H={class:"td-type"},X={class:"td-price"},Z={class:"td-purchase"},ee=["onClick"];function te(s,e,o,c,n,a){return l(),i("article",null,[e[2]||(e[2]=t("h2",{class:"title mb-2 mb-md-0"},[t("span",{class:"title-english"},"TICKET"),t("span",{class:"title-chinese"},"購票資訊")],-1)),t("table",G,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"th-date"},"活動日期"),t("th",{scope:"col"},"票種"),t("th",{scope:"col",class:"th-price"},"票價"),t("th",{scope:"col",class:"th-purchase"},"購票")])],-1)),t("tbody",null,[(l(!0),i(b,null,x(n.tickets,d=>(l(),i("tr",{key:d.id},[t("td",null,r(o.event.date),1),t("td",H,r(d.type),1),t("td",X,"$"+r(d.price),1),t("td",Z,[t("button",{type:"button",class:"px-3 px-md-6 py-2 btn btn-outline-primary font-noto-serif-tc",onClick:Q(k=>a.purchase(d),["prevent"])},e[0]||(e[0]=[t("span",{class:"d-none d-md-inline"},"立即",-1),m("購票 ")]),8,ee)])]))),128))])])])}const se=L(z,[["render",te],["__scopeId","data-v-c586b0af"]]),oe={data(){return{event:{},message:""}},methods:{...I(A,{openLoading:"open",closeLoading:"close"}),getDescParagraphs(s){return B.splitParagraphs(s)}},computed:{day(){if(!this.event.date)return{};const s=w.convertToDate(this.event.date);return{year:s.getFullYear(),month:w.getMonthAbbrByMonth(s.getMonth()+1),date:s.getDate()}}},components:{TicketInfo:se,SimpleMsg:U},created(){this.openLoading(),Promise.all([W.fetchTags(),J.fetchEvent(this.$route.params.id)]).then(s=>{const e=new O(s[0]);this.event=new C(s[1],e),this.event.id||(this.message="查無活動資料！")}).finally(()=>{this.closeLoading()})}},ne={key:0,class:"container mt-4 mt-md-30px mb-12 mb-md-15"},re={class:"row row-gap-2 mb-6"},le={class:"col-xl-10"},ie={class:"p-3 p-xl-6 border border-2 border-md-3 border-primary"},ce=["src","alt"],ae={class:"col-xl-2"},de={class:"row row-gap-6 flex-xl-column lh-1 h-100"},pe={class:"col-4 col-md-5 col-xl-12"},me={class:"fs-24 fs-md-48 border border-2 border-md-3 border-primary h-78px h-md-119px text-center align-content-center"},he={class:"col-8 col-md-7 col-xl-12 flex-grow-1 fs-16"},ue={class:"px-6 px-md-15 px-xl-0 py-xl-12 border border-2 border-md-3 border-primary d-flex flex-xl-column justify-content-between align-items-center text-center h-100"},fe={class:"fs-22 fs-md-32 fs-xl-48 lh-1d136 lh-md-1d146"},_e={class:"fs-md-24 fs-xl-32 lh-1d125 lh-md-1d155"},ve={class:"mb-2 mb-md-4 fs-32 fs-md-60 lh-1d438 lh-md-1d433 fw-bold letter-spacing-5"},ge={class:"mb-6 fs-md-22 lh-md-1d45 font-noto-sans-tc"},be={class:"mb-12 d-none d-md-flex flex-wrap gap-2"},xe={class:"p-4 p-md-8 mb-6 mb-md-12 border border-2 border-md-3 border-primary font-noto-sans-tc d-flex flex-column row-gap-4 text-justify"},ye={key:0};function ke(s,e,o,c,n,a){const d=E("TicketInfo"),k=E("SimpleMsg");return n.event.id?(l(),i("div",ne,[t("section",re,[t("div",le,[t("div",ie,[t("img",{src:n.event.img,alt:n.event.title,class:"ratio-1d817 ratio-xl-1d869 w-100 object-fit-cover"},null,8,ce)])]),t("div",ae,[t("h2",de,[t("div",pe,[t("div",me,r(a.day.year),1)]),t("div",he,[t("div",ue,[t("div",fe,[m(r(a.day.month),1),e[0]||(e[0]=t("br",null,null,-1)),m(r(a.day.date),1)]),e[4]||(e[4]=t("div",{class:"slash"},null,-1)),t("div",_e,[m(r(n.event.sTime),1),e[1]||(e[1]=t("br",null,null,-1)),e[2]||(e[2]=m("｜")),e[3]||(e[3]=t("br",null,null,-1)),m(r(n.event.eTime),1)])])])])])]),t("article",null,[t("h2",ve,r(n.event.title),1),t("p",ge,r(n.event.subTitle),1),t("ul",be,[(l(!0),i(b,null,x(n.event.tagDatas,h=>(l(),i("li",{class:"tag",key:h.id},r(h.name),1))),128))]),t("div",xe,[n.event.opening?(l(),i("p",ye,r(n.event.opening),1)):D("",!0),(l(!0),i(b,null,x(a.getDescParagraphs(n.event.desc),(h,P)=>(l(),i("p",{key:P},r(h),1))),128))])]),n.event.id?(l(),M(d,{key:0,event:n.event},null,8,["event"])):D("",!0)])):(l(),M(k,{key:1,message:n.message},null,8,["message"]))}const Ne=L(oe,[["render",ke],["__scopeId","data-v-b1e7e5a8"]]);export{Ne as default};
//# sourceMappingURL=EventDetailView-VIXl7l4N.js.map
