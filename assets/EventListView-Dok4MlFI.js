var _=Object.defineProperty;var x=(t,e,n)=>e in t?_(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var u=(t,e,n)=>x(t,typeof e!="symbol"?e+"":e,n);import{T as v,_ as y,E as C,F as I,u as D,a as d}from"./index-CrG2WYLF.js";import"./sweetalert2-BQIkj5Wb.js";import"./vue-loading-overlay-JrazHNIQ.js";import{r as S,d as z,C as l,D as r,P as f,I as P,J as T,O as p,E as w,K as N,F as g,M as b,G as V}from"./@vue-CUoatyKe.js";import"./pinia-bQsspql1.js";import"./vue-router-DB_2aUxA.js";import"./axios-Dq7h7Pqt.js";import"./swiper-DH9tmj--.js";import"./bootstrap-B6X7VvZS.js";import"./@popperjs-BEKk9TLb.js";import"./vee-validate-CcKx5t38.js";import"./@vee-validate-CU2VKbMu.js";import"./vue-b_kHcNLJ.js";const B=10,F=1;class L{constructor(e,n=B,i=F){u(this,"datas");u(this,"pageSize");u(this,"currentPage");this.datas=e,this.pageSize=n,this.currentPage=i}}function H(t){const e=t.datas;if(!(e instanceof Array))throw Error("[datas] 必須使用陣列！");let n;try{n=v.converToNumber(t.pageSize)}catch(o){throw new Error("[pageSize] 不正確！",{cause:o})}let i;try{i=S(v.converToNumber(t.currentPage))}catch(o){throw new Error("[currentPage] 不正確！",{cause:o})}const a=e.length;let c=Math.ceil(a/n);const m=z(()=>{const o=(i.value-1)*n,M=i.value*n;return e.slice(o,M)});function s(o){if(o=v.converToNumber(o),o<1||o>c)throw Error(`[pageNo] 頁碼應介於 1 ~ ${c} 之間！`);i.value=o}function h(){const o=i.value+1;o<=c&&(i.value=o)}function E(){const o=i.value-1;o>=1&&(i.value=o)}return{currentDatas:m,currentPage:i,totalPages:c,totalSize:a,pageSize:n,changePage:s,goToNextPage:h,goToPrevPage:E}}const O=12,k=new I,A={data(){return{selectedTagIds:d.getTagData(),tagModel:null,eventTagModel:null,pagination:null}},methods:{toggleTag(t){const e=this.selectedTagIds.indexOf(t);e>=0?this.selectedTagIds.splice(e,1):this.selectedTagIds.push(t),d.updateTagData(this.selectedTagIds),d.updatePageData(1)}},computed:{filteredEvents(){var t,e,n,i,a,c;return((e=(t=this.eventTagModel)==null?void 0:t.datas)==null?void 0:e.length)>0?((n=this.selectedTagIds)==null?void 0:n.length)>0&&((i=this.selectedTagIds)==null?void 0:i.length)<((c=(a=this.tagModel)==null?void 0:a.datas)==null?void 0:c.length)?this.eventTagModel.filterByTagIds(this.selectedTagIds):this.eventTagModel.datas:[]}},watch:{filteredEvents(t){const e=d.getPageData(),n=new L(t,O,e);this.pagination=H(n)},"pagination.currentPage"(t){d.updatePageData(t)},"pagination.currentDatas"(){window.scrollTo({top:0})}},components:{EventCard:C},created(){k.open(),D().then(t=>{this.tagModel=t.tagModel,this.eventTagModel=t.eventTagModel,console.log("this.eventTagModel =====>",this.eventTagModel)}).finally(()=>{k.close()})}},G={class:"container mt-4 mt-md-8"},J={key:0,class:"d-flex flex-wrap gap-2 mb-8"},K=["onClick"],U={key:1,class:"row row-gap-6 row-gap-md-12 mb-8 mb-md-15"},j={"aria-label":"Page navigation",class:"mb-12 mb-md-15"},q={key:0,class:"pagination"},Q=["onClick"];function R(t,e,n,i,a,c){const m=N("EventCard");return g(),l("div",G,[e[4]||(e[4]=r("h2",{class:"title mb-3 mb-md-8"},[r("span",{class:"title-english"},"EVENT"),r("span",{class:"title-chinese"},"所有活動")],-1)),a.tagModel?(g(),l("ul",J,[(g(!0),l(P,null,T(a.tagModel.datas,s=>(g(),l("li",{key:s.id},[r("button",{type:"button",class:p(a.selectedTagIds.includes(s.id)?"tag-btn-selected":"tag-btn"),onClick:h=>c.toggleTag(s.id)},b(s.name),11,K)]))),128))])):f("",!0),a.pagination?(g(),l("ul",U,[(g(!0),l(P,null,T(a.pagination.currentDatas,s=>(g(),l("li",{class:"col-md-6 col-xl-4",key:s.id},[V(m,{event:s},null,8,["event"])]))),128))])):f("",!0),r("nav",j,[a.pagination?(g(),l("ul",q,[r("li",{class:p(["page-item",{disabled:a.pagination.currentPage===1}])},[r("a",{class:"page-link fs-18",href:"#",onClick:e[0]||(e[0]=w((...s)=>a.pagination.goToPrevPage&&a.pagination.goToPrevPage(...s),["prevent"]))},e[2]||(e[2]=[r("i",{class:"icofont-arrow-left"},null,-1)]))],2),(g(!0),l(P,null,T(a.pagination.totalPages,s=>(g(),l("li",{key:s,class:p(["page-item",{active:a.pagination.currentPage===s}])},[r("a",{class:"page-link",href:"#",onClick:w(h=>a.pagination.changePage(s),["prevent"])},b(s),9,Q)],2))),128)),r("li",{class:p(["page-item",{disabled:a.pagination.currentPage===a.pagination.totalPages}])},[r("a",{class:"page-link fs-18",href:"#",onClick:e[1]||(e[1]=w((...s)=>a.pagination.goToNextPage&&a.pagination.goToNextPage(...s),["prevent"]))},e[3]||(e[3]=[r("i",{class:"icofont-arrow-right"},null,-1)]))],2)])):f("",!0)])])}const ge=y(A,[["render",R]]);export{ge as default};
//# sourceMappingURL=EventListView-Dok4MlFI.js.map
