var P=Object.defineProperty;var x=s=>{throw TypeError(s)};var F=(s,e,n)=>e in s?P(s,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[e]=n;var a=(s,e,n)=>F(s,typeof e!="symbol"?e+"":e,n),j=(s,e,n)=>e.has(s)||x("Cannot "+n);var y=(s,e,n)=>(j(s,e,"read from private field"),n?n.call(s):e.get(s)),k=(s,e,n)=>e.has(s)?x("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,n);import{A as q,R as A,M as V,_ as D,b as I,F as N,c as K,d as L,e as R,D as T}from"./index-C5D5eEvF.js";import"./sweetalert2-BQIkj5Wb.js";import"./vue-loading-overlay-JrazHNIQ.js";import{C as i,D as t,I as _,J as g,F as l,M as r,E as H,Q as d,L as w,P as M,K as E}from"./@vue-CUoatyKe.js";import{_ as J}from"./SimpleMsg-D1-cosi1.js";import"./pinia-bQsspql1.js";import"./vue-router-DB_2aUxA.js";import"./axios-Dq7h7Pqt.js";import"./swiper-nGFe7HYY.js";import"./bootstrap-B6X7VvZS.js";import"./@popperjs-BEKk9TLb.js";import"./vee-validate-CcKx5t38.js";import"./@vee-validate-CU2VKbMu.js";import"./vue-b_kHcNLJ.js";class S extends q{static get url(){return"/tickets"}static fetchTickets(){return this._axios.get(`${this.url}`)}static fetchEventTickets(e){return this._axios.get(`${this.url}?eventId=${e}`)}}class Q{static get lineBreakSymbol(){return`
`}static splitParagraphs(e){return(e==null?void 0:e.split(this.lineBreakSymbol))??[]}}class U{static async fetchTickets(){let e;return await S.fetchTickets().then(n=>{e=n.data}).catch(n=>{console.error(n)}),e||[]}static async fetchEventTickets(e){let n;return await S.fetchEventTickets(e).then(c=>{n=c.data}).catch(c=>{console.error(c)}),n||[]}}var u;const f=class f extends A{constructor(n){super(n);a(this,"eventId");a(this,"type");a(this,"price",0);a(this,"qtyTotal",0);a(this,"qtyStock",0);this._assignData(n,y(f,u))}};u=new WeakMap,k(f,u,["eventId","type","price","qtyTotal","qtyStock"]);let b=f;class Y extends V{get datas(){return this._datas}constructor(e=[]){super(),e.forEach(n=>{const c=new b(n);this._datas.push(c)})}}const z={props:{event:I},inject:["loading"],data(){return{tickets:[]}},created(){this.loading.open(),U.fetchEventTickets(this.event.id).then(s=>{this.tickets=new Y(s).datas}).finally(()=>{this.loading.close()})}},G={class:"table table-hover"},O={class:"td-type"},W={class:"td-price"},X={class:"td-purchase"};function Z(s,e,n,c,o,p){return l(),i("article",null,[e[3]||(e[3]=t("h2",{class:"title mb-2 mb-md-0"},[t("span",{class:"title-english"},"TICKET"),t("span",{class:"title-chinese"},"購票資訊")],-1)),t("table",G,[e[2]||(e[2]=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"th-date"},"活動日期"),t("th",{scope:"col"},"票種"),t("th",{scope:"col",class:"th-price"},"票價"),t("th",{scope:"col",class:"th-purchase"},"購票")])],-1)),t("tbody",null,[(l(!0),i(_,null,g(o.tickets,m=>(l(),i("tr",{key:m.id},[t("td",null,r(n.event.date),1),t("td",O,r(m.type),1),t("td",W,"$"+r(m.price),1),t("td",X,[t("button",{type:"button",class:"px-3 px-md-6 py-2 btn btn-outline-primary font-noto-serif-tc",onClick:e[0]||(e[0]=H(()=>{},["prevent"]))},e[1]||(e[1]=[t("span",{class:"d-none d-md-inline"},"立即",-1),d("購票 ")]))])]))),128))])])])}const $=D(z,[["render",Z],["__scopeId","data-v-fc2702de"]]),v=new N,ee={data(){return{event:{},message:""}},provide(){return{loading:v}},methods:{getDescParagraphs(s){return Q.splitParagraphs(s)}},computed:{day(){if(!this.event.date)return{};const s=T.convertToDate(this.event.date);return{year:s.getFullYear(),month:T.getMonthAbbrByMonth(s.getMonth()+1),date:s.getDate()}}},components:{TicketInfo:$,SimpleMsg:J},beforeCreate(){v.open(),Promise.all([K.fetchTags(),L.fetchEvent(this.$route.params.id)]).then(s=>{const e=new R(s[0]);this.event=new I(s[1],e),this.event.id||(this.message="查無活動資料！")}).finally(()=>{v.close()})}},te={key:0,class:"container mt-4 mt-md-30px mb-12 mb-md-15"},se={class:"row row-gap-2 mb-6"},ne={class:"col-xl-10"},oe={class:"p-3 p-xl-6 border border-2 border-md-3 border-primary"},re=["src","alt"],le={class:"col-xl-2"},ie={class:"row row-gap-6 flex-xl-column lh-1 h-100"},ce={class:"col-4 col-md-5 col-xl-12"},ae={class:"fs-24 fs-md-48 border border-2 border-md-3 border-primary h-78px h-md-119px text-center align-content-center"},de={class:"col-8 col-md-7 col-xl-12 flex-grow-1 fs-16"},pe={class:"px-6 px-md-15 px-xl-0 py-xl-12 border border-2 border-md-3 border-primary d-flex flex-xl-column justify-content-between align-items-center text-center h-100"},me={class:"fs-22 fs-md-32 fs-xl-48 lh-1d136 lh-md-1d146"},he={class:"fs-md-24 fs-xl-32 lh-1d125 lh-md-1d155"},ue={class:"mb-2 mb-md-4 fs-32 fs-md-60 lh-1d438 lh-md-1d433 fw-bold letter-spacing-5"},fe={class:"mb-6 fs-md-22 lh-md-1d45 font-noto-sans-tc"},ve={class:"mb-12 d-none d-md-flex flex-wrap gap-2"},_e={class:"p-4 p-md-8 mb-6 mb-md-12 border border-2 border-md-3 border-primary font-noto-sans-tc d-flex flex-column row-gap-4 text-justify"},ge={key:0};function be(s,e,n,c,o,p){const m=E("TicketInfo"),B=E("SimpleMsg");return o.event.id?(l(),i("div",te,[t("section",se,[t("div",ne,[t("div",oe,[t("img",{src:o.event.img,alt:o.event.title,class:"ratio-1d817 ratio-xl-1d869 w-100 object-fit-cover"},null,8,re)])]),t("div",le,[t("h2",ie,[t("div",ce,[t("div",ae,r(p.day.year),1)]),t("div",de,[t("div",pe,[t("div",me,[d(r(p.day.month),1),e[0]||(e[0]=t("br",null,null,-1)),d(r(p.day.date),1)]),e[4]||(e[4]=t("div",{class:"slash"},null,-1)),t("div",he,[d(r(o.event.sTime),1),e[1]||(e[1]=t("br",null,null,-1)),e[2]||(e[2]=d("｜")),e[3]||(e[3]=t("br",null,null,-1)),d(r(o.event.eTime),1)])])])])])]),t("article",null,[t("h2",ue,r(o.event.title),1),t("p",fe,r(o.event.subTitle),1),t("ul",ve,[(l(!0),i(_,null,g(o.event.tagDatas,h=>(l(),i("li",{class:"tag",key:h.id},r(h.name),1))),128))]),t("div",_e,[o.event.opening?(l(),i("p",ge,r(o.event.opening),1)):M("",!0),(l(!0),i(_,null,g(p.getDescParagraphs(o.event.desc),(h,C)=>(l(),i("p",{key:C},r(h),1))),128))])]),o.event.id?(l(),w(m,{key:0,event:o.event},null,8,["event"])):M("",!0)])):(l(),w(B,{key:1,message:o.message},null,8,["message"]))}const qe=D(ee,[["render",be],["__scopeId","data-v-f20414d0"]]);export{qe as default};
//# sourceMappingURL=EventDetailView--Vv_aYcO.js.map
