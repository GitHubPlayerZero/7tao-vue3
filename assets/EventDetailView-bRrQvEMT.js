var A=Object.defineProperty;var y=s=>{throw TypeError(s)};var P=(s,e,o)=>e in s?A(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o;var p=(s,e,o)=>P(s,typeof e!="symbol"?e+"":e,o),q=(s,e,o)=>e.has(s)||y("Cannot "+o);var x=(s,e,o)=>(q(s,e,"read from private field"),o?o.call(s):e.get(s)),k=(s,e,o)=>e.has(s)?y("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(s):e.set(s,o);import{m as E}from"./pinia-DqmZPWd1.js";import{A as V,R as j,M as N,_ as I,c as L,C as R,b as C,d as F,e as K,f as W,D as T}from"./index-UocCHfFc.js";import"./sweetalert2-BQIkj5Wb.js";import{I as i,K as t,O as _,P as v,J as l,S as r,L as J,W as m,R as w,V as S,Q as M}from"./@vue-Do0nUilh.js";import{_ as O}from"./SimpleMsg-vu-3BV_5.js";import"./vue-router-D118yu3W.js";import"./vue-loading-overlay-Cwp7xFsJ.js";import"./vue-DQg1XPYn.js";import"./axios-Dq7h7Pqt.js";import"./swiper-Dgyh-p-x.js";import"./bootstrap-B6X7VvZS.js";import"./@popperjs-BEKk9TLb.js";import"./vee-validate-fXn4I-uS.js";import"./@vee-validate-CU2VKbMu.js";class D extends V{static get url(){return"/tickets"}static fetchTickets(){return this._axios.get(`${this.url}`)}static fetchEventTickets(e){return this._axios.get(`${this.url}?eventId=${e}`)}}class Q{static get lineBreakSymbol(){return`
`}static splitParagraphs(e){return(e==null?void 0:e.split(this.lineBreakSymbol))??[]}}class U{static async fetchTickets(){let e;return await D.fetchTickets().then(o=>{e=o.data}).catch(o=>{console.error(o)}),e||[]}static async fetchEventTickets(e){let o;return await D.fetchEventTickets(e).then(c=>{o=c.data}).catch(c=>{console.error(c)}),o||[]}}var u;const f=class f extends j{constructor(o){super(o);p(this,"eventId");p(this,"type");p(this,"price",0);p(this,"qtyTotal",0);p(this,"qtyStock",0);this._assignData(o,x(f,u))}};u=new WeakMap,k(f,u,["eventId","type","price","qtyTotal","qtyStock"]);let g=f;class Y extends N{get datas(){return this._datas}constructor(e=[]){super(),e.forEach(o=>{const c=new g(o);this._datas.push(c)})}}const $={props:{event:{type:L,required:!0}},data(){return{tickets:[]}},created(){console.log("## [TicketInfo] this ==>",this),this.openLoading(),U.fetchEventTickets(this.event.id).then(s=>{this.tickets=new Y(s).datas}).finally(()=>{this.closeLoading()})},methods:{...E(C,{openLoading:"open",closeLoading:"close"}),purchase(s){R.alertWarningDetail("施工中...","購票功能尚未開放，敬請期待！")}}},z={class:"table table-hover"},G={class:"td-type"},H={class:"td-price"},X={class:"td-purchase"},Z=["onClick"];function ee(s,e,o,c,n,a){return l(),i("article",null,[e[2]||(e[2]=t("h2",{class:"title mb-2 mb-md-0"},[t("span",{class:"title-english"},"TICKET"),t("span",{class:"title-chinese"},"購票資訊")],-1)),t("table",z,[e[1]||(e[1]=t("thead",null,[t("tr",null,[t("th",{scope:"col",class:"th-date"},"活動日期"),t("th",{scope:"col"},"票種"),t("th",{scope:"col",class:"th-price"},"票價"),t("th",{scope:"col",class:"th-purchase"},"購票")])],-1)),t("tbody",null,[(l(!0),i(_,null,v(n.tickets,d=>(l(),i("tr",{key:d.id},[t("td",null,r(o.event.date),1),t("td",G,r(d.type),1),t("td",H,"$"+r(d.price),1),t("td",X,[t("button",{type:"button",class:"px-3 px-md-6 py-2 btn btn-outline-primary font-noto-serif-tc",onClick:J(b=>a.purchase(d),["prevent"])},e[0]||(e[0]=[t("span",{class:"d-none d-md-inline"},"立即",-1),m("購票 ")]),8,Z)])]))),128))])])])}const te=I($,[["render",ee],["__scopeId","data-v-6caaf3a9"]]),se={data(){return{event:{},message:""}},methods:{...E(C,{openLoading:"open",closeLoading:"close"}),getDescParagraphs(s){return Q.splitParagraphs(s)}},computed:{day(){if(!this.event.date)return{};const s=T.convertToDate(this.event.date);return{year:s.getFullYear(),month:T.getMonthAbbrByMonth(s.getMonth()+1),date:s.getDate()}}},components:{TicketInfo:te,SimpleMsg:O},created(){this.openLoading(),Promise.all([F.fetchTags(),K.fetchEvent(this.$route.params.id)]).then(s=>{const e=new W(s[0]);this.event=new L(s[1],e),this.event.id||(this.message="查無活動資料！")}).finally(()=>{this.closeLoading()})}},oe={key:0,class:"container mt-4 mt-md-30px mb-12 mb-md-15"},ne={class:"row row-gap-2 mb-6"},re={class:"col-xl-10"},le={class:"p-3 p-xl-6 border border-2 border-md-3 border-primary"},ie=["src","alt"],ce={class:"col-xl-2"},ae={class:"row row-gap-6 flex-xl-column lh-1 h-100"},de={class:"col-4 col-md-5 col-xl-12"},pe={class:"fs-24 fs-md-48 border border-2 border-md-3 border-primary h-78px h-md-119px text-center align-content-center"},me={class:"col-8 col-md-7 col-xl-12 flex-grow-1 fs-16"},he={class:"px-6 px-md-15 px-xl-0 py-xl-12 border border-2 border-md-3 border-primary d-flex flex-xl-column justify-content-between align-items-center text-center h-100"},ue={class:"fs-22 fs-md-32 fs-xl-48 lh-1d136 lh-md-1d146"},fe={class:"fs-md-24 fs-xl-32 lh-1d125 lh-md-1d155"},_e={class:"mb-2 mb-md-4 fs-32 fs-md-60 lh-1d438 lh-md-1d433 fw-bold letter-spacing-5"},ve={class:"mb-6 fs-md-22 lh-md-1d45 font-noto-sans-tc"},ge={class:"mb-12 d-none d-md-flex flex-wrap gap-2"},be={class:"p-4 p-md-8 mb-6 mb-md-12 border border-2 border-md-3 border-primary font-noto-sans-tc d-flex flex-column row-gap-4 text-justify"},ye={key:0};function xe(s,e,o,c,n,a){const d=M("TicketInfo"),b=M("SimpleMsg");return n.event.id?(l(),i("div",oe,[t("section",ne,[t("div",re,[t("div",le,[t("img",{src:n.event.img,alt:n.event.title,class:"ratio-1d817 ratio-xl-1d869 w-100 object-fit-cover"},null,8,ie)])]),t("div",ce,[t("h2",ae,[t("div",de,[t("div",pe,r(a.day.year),1)]),t("div",me,[t("div",he,[t("div",ue,[m(r(a.day.month),1),e[0]||(e[0]=t("br",null,null,-1)),m(r(a.day.date),1)]),e[4]||(e[4]=t("div",{class:"slash"},null,-1)),t("div",fe,[m(r(n.event.sTime),1),e[1]||(e[1]=t("br",null,null,-1)),e[2]||(e[2]=m("｜")),e[3]||(e[3]=t("br",null,null,-1)),m(r(n.event.eTime),1)])])])])])]),t("article",null,[t("h2",_e,r(n.event.title),1),t("p",ve,r(n.event.subTitle),1),t("ul",ge,[(l(!0),i(_,null,v(n.event.tagDatas,h=>(l(),i("li",{class:"tag",key:h.id},r(h.name),1))),128))]),t("div",be,[n.event.opening?(l(),i("p",ye,r(n.event.opening),1)):S("",!0),(l(!0),i(_,null,v(a.getDescParagraphs(n.event.desc),(h,B)=>(l(),i("p",{key:B},r(h),1))),128))])]),n.event.id?(l(),w(d,{key:0,event:n.event},null,8,["event"])):S("",!0)])):(l(),w(b,{key:1,message:n.message},null,8,["message"]))}const je=I(se,[["render",xe],["__scopeId","data-v-38b23a44"]]);export{je as default};
//# sourceMappingURL=EventDetailView-bRrQvEMT.js.map
