var P=Object.defineProperty;var x=s=>{throw TypeError(s)};var F=(s,t,n)=>t in s?P(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n;var a=(s,t,n)=>F(s,typeof t!="symbol"?t+"":t,n),j=(s,t,n)=>t.has(s)||x("Cannot "+n);var y=(s,t,n)=>(j(s,t,"read from private field"),n?n.call(s):t.get(s)),k=(s,t,n)=>t.has(s)?x("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,n);import{A as q,R as A,M as V,_ as D,b as I,F as N,c as K,d as L,e as R,D as T}from"./index-D-ZlVilv.js";import"./sweetalert2-BQIkj5Wb.js";import"./vue-loading-overlay-JrazHNIQ.js";import{C as i,D as e,I as _,J as b,F as l,M as r,E as H,Q as d,L as w,P as M,K as E}from"./@vue-CUoatyKe.js";import{_ as J}from"./SimpleMsg-D1-cosi1.js";import"./pinia-bQsspql1.js";import"./vue-router-DB_2aUxA.js";import"./axios-Dq7h7Pqt.js";import"./swiper-DH9tmj--.js";import"./bootstrap-B6X7VvZS.js";import"./@popperjs-BEKk9TLb.js";import"./vee-validate-CcKx5t38.js";import"./@vee-validate-CU2VKbMu.js";import"./vue-b_kHcNLJ.js";class S extends q{static get url(){return"/tickets"}static fetchTickets(){return this._axios.get(`${this.url}`)}static fetchEventTickets(t){return this._axios.get(`${this.url}?eventId=${t}`)}}class Q{static get lineBreakSymbol(){return`
`}static splitParagraphs(t){return(t==null?void 0:t.split(this.lineBreakSymbol))??[]}}class U{static async fetchTickets(){let t;return await S.fetchTickets().then(n=>{t=n.data}).catch(n=>{console.error(n)}),t||[]}static async fetchEventTickets(t){let n;return await S.fetchEventTickets(t).then(c=>{n=c.data}).catch(c=>{console.error(c)}),n||[]}}var u;const f=class f extends A{constructor(n){super(n);a(this,"eventId");a(this,"type");a(this,"price",0);a(this,"qtyTotal",0);a(this,"qtyStock",0);this._assignData(n,y(f,u))}};u=new WeakMap,k(f,u,["eventId","type","price","qtyTotal","qtyStock"]);let g=f;class Y extends V{get datas(){return this._datas}constructor(t=[]){super(),t.forEach(n=>{const c=new g(n);this._datas.push(c)})}}const z={props:{event:I},inject:["loading"],data(){return{tickets:[]}},created(){this.loading.open(),U.fetchEventTickets(this.event.id).then(s=>{this.tickets=new Y(s).datas}).finally(()=>{this.loading.close()})}},G={class:"table table-hover"},O={class:"td-type"},W={class:"td-price"},X={class:"td-purchase"};function Z(s,t,n,c,o,p){return l(),i("article",null,[t[3]||(t[3]=e("h2",{class:"title mb-2 mb-md-0"},[e("span",{class:"title-english"},"TICKET"),e("span",{class:"title-chinese"},"購票資訊")],-1)),e("table",G,[t[2]||(t[2]=e("thead",null,[e("tr",null,[e("th",{scope:"col",class:"th-date"},"活動日期"),e("th",{scope:"col"},"票種"),e("th",{scope:"col",class:"th-price"},"票價"),e("th",{scope:"col",class:"th-purchase"},"購票")])],-1)),e("tbody",null,[(l(!0),i(_,null,b(o.tickets,m=>(l(),i("tr",{key:m.id},[e("td",null,r(n.event.date),1),e("td",O,r(m.type),1),e("td",W,"$"+r(m.price),1),e("td",X,[e("button",{type:"button",class:"px-3 px-md-6 py-2 btn btn-outline-primary font-noto-serif-tc",onClick:t[0]||(t[0]=H(()=>{},["prevent"]))},t[1]||(t[1]=[e("span",{class:"d-none d-md-inline"},"立即",-1),d("購票 ")]))])]))),128))])])])}const $=D(z,[["render",Z],["__scopeId","data-v-2c4f2d5c"]]),v=new N,tt={data(){return{event:{},message:""}},provide(){return{loading:v}},methods:{getDescParagraphs(s){return Q.splitParagraphs(s)}},computed:{day(){if(!this.event.date)return{};const s=T.convertToDate(this.event.date);return{year:s.getFullYear(),month:T.getMonthAbbrByMonth(s.getMonth()+1),date:s.getDate()}}},components:{TicketInfo:$,SimpleMsg:J},beforeCreate(){v.open(),Promise.all([K.fetchTags(),L.fetchEvent(this.$route.params.id)]).then(s=>{const t=new R(s[0]);this.event=new I(s[1],t),this.event.id||(this.message="查無活動資料！")}).finally(()=>{v.close()})}},et={key:0,class:"container mt-4 mt-md-30px mb-12 mb-md-15"},st={class:"row row-gap-2 mb-6"},nt={class:"col-xl-10"},ot={class:"p-3 p-xl-6 border border-2 border-md-3 border-primary"},rt=["src","alt"],lt={class:"col-xl-2"},it={class:"row row-gap-6 flex-xl-column lh-1 h-100"},ct={class:"col-4 col-md-5 col-xl-12"},at={class:"fs-24 fs-md-48 border border-2 border-md-3 border-primary h-78px h-md-119px text-center align-content-center"},dt={class:"col-8 col-md-7 col-xl-12 flex-grow-1 fs-16"},pt={class:"px-6 px-md-15 px-xl-0 py-xl-12 border border-2 border-md-3 border-primary d-flex flex-xl-column justify-content-between align-items-center text-center h-100"},mt={class:"fs-22 fs-md-32 fs-xl-48 lh-1d136 lh-md-1d146"},ht={class:"fs-md-24 fs-xl-32 lh-1d125 lh-md-1d155"},ut={class:"mb-2 mb-md-4 fs-32 fs-md-60 lh-1d438 lh-md-1d433 fw-bold letter-spacing-5"},ft={class:"mb-6 fs-md-22 lh-md-1d45 font-noto-sans-tc"},vt={class:"mb-12 d-none d-md-flex flex-wrap gap-2"},_t={class:"p-4 p-md-8 mb-6 mb-md-12 border border-2 border-md-3 border-primary font-noto-sans-tc d-flex flex-column row-gap-4 text-justify"},bt={key:0};function gt(s,t,n,c,o,p){const m=E("TicketInfo"),B=E("SimpleMsg");return o.event.id?(l(),i("div",et,[e("section",st,[e("div",nt,[e("div",ot,[e("img",{src:o.event.img,alt:o.event.title,class:"ratio-1d817 ratio-xl-1d869 w-100 object-fit-cover"},null,8,rt)])]),e("div",lt,[e("h2",it,[e("div",ct,[e("div",at,r(p.day.year),1)]),e("div",dt,[e("div",pt,[e("div",mt,[d(r(p.day.month),1),t[0]||(t[0]=e("br",null,null,-1)),d(r(p.day.date),1)]),t[4]||(t[4]=e("div",{class:"slash"},null,-1)),e("div",ht,[d(r(o.event.sTime),1),t[1]||(t[1]=e("br",null,null,-1)),t[2]||(t[2]=d("｜")),t[3]||(t[3]=e("br",null,null,-1)),d(r(o.event.eTime),1)])])])])])]),e("article",null,[e("h2",ut,r(o.event.title),1),e("p",ft,r(o.event.subTitle),1),e("ul",vt,[(l(!0),i(_,null,b(o.event.tagDatas,h=>(l(),i("li",{class:"tag",key:h.id},r(h.name),1))),128))]),e("div",_t,[o.event.opening?(l(),i("p",bt,r(o.event.opening),1)):M("",!0),(l(!0),i(_,null,b(p.getDescParagraphs(o.event.desc),(h,C)=>(l(),i("p",{key:C},r(h),1))),128))])]),o.event.id?(l(),w(m,{key:0,event:o.event},null,8,["event"])):M("",!0)])):(l(),w(B,{key:1,message:o.message},null,8,["message"]))}const qt=D(tt,[["render",gt],["__scopeId","data-v-bb66596a"]]);export{qt as default};
//# sourceMappingURL=EventDetailView-CiTbvv8M.js.map
